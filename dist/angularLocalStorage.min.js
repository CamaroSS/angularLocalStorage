!function(e,d,t){"use strict";d.module("angularLocalStorage",["ngCookies"]).factory("storage",["$parse","$cookies","$window","$log",function(i,o,e,n){var a=void 0===e.localStorage?void 0:e.localStorage,u=void 0!==a,l={};if(u){var t="__"+Math.round(1e7*Math.random());try{localStorage.setItem(t,t),localStorage.removeItem(t)}catch(e){u=!1}}var c=function(t){var r;try{void 0===(r=d.fromJson(t))&&(r=t),"true"===r&&(r=!0),"false"===r&&(r=!1),e.parseFloat(r)!==r||d.isObject(r)||(r=e.parseFloat(r))}catch(e){r=t}return r},s=function(e,t){return e.$id+t},f={set:function(e,t){if(!u)try{return o.put(e,t),t}catch(e){n.log("Local Storage not supported, make sure you have angular-cookies enabled.")}var r=d.toJson(t);return a.setItem(e,r),c(r)},get:function(e){if(!u)try{return o.get(e)}catch(e){return null}var t=a.getItem(e);return c(t)},remove:function(e){if(!u)try{return o.remove(e),!0}catch(e){return!1}return a.removeItem(e),!0},bind:function(e,t,r){var o=s(e,t),n={defaultValue:"",storeName:""},a=(r=d.isString(r)?d.extend({},n,{defaultValue:r}):d.isUndefined(r)?n:d.extend(n,r)).storeName||t,u=e.$eval(t);return null===f.get(a)&&void 0===u&&f.set(a,r.defaultValue),void 0===u&&i(t).assign(e,f.get(a)),l[o]=e.$watch(t,function(e){d.isDefined(e)&&f.set(a,e)},!0),f.get(a)},unbind:function(e,t,r){var o=s(e,t);r=r||t,i(t).assign(e,null),f.remove(r),l[o]&&(l[o](),delete l[o])},clearAll:function(){a.clear()},isCookieFallbackActive:function(){return!u},getKeys:function(){var e=[];if(u)for(var t=0,r=localStorage.length;t<r;++t)e.push(localStorage.key(t));else for(var o=document.cookie.split(";"),n=0,a=o.length;n<a;++n)e.push(o[n].split("=")[0].trim());return e}};return f}])}(window,window.angular);
